# 2048 Game Notation (2048-GN)

**2048 Game Notation (2048-GN)** is a standardized, plain-text format for recording and replaying games of 2048. It is designed to be human-readable, easily parsable by software, and comprehensive enough to ensure a game can be reproduced exactly from its notation file.

A 2048-GN file is UTF-8 encoded and is organized into three distinct, sequential sections:
1.  **Tag Pairs (Header):** Metadata describing the game, player, and context.
2.  **Movetext:** A chronological record of all player moves and subsequent random tile spawns.
3.  **Termination Marker:** A single keyword indicating the final result of the game.

## 1. Tag Pairs (Header)

The file begins with a header section containing key-value metadata. Each tag pair is on its own line and follows the syntax `[TagName "TagValue"]`.

#### Mandatory Tags
A valid 2048-GN file must include the following five tags:
*   `[Event "..."]`: The name of the event or tournament (e.g., "Personal Best Run").
*   `[Site "..."]`: The location or platform where the game was played (e.g., "Web Browser").
*   `[Date "YYYY.MM.DD"]`: The start date of the game.
*   `[Player "..."]`: The name of the player.
*   `[InitialBoard "Tile1 Tile2"]`: The position of the two starting tiles. Tile locations are specified using the coordinate system described below.

#### Optional Tags
These tags are highly recommended for complete archival:
*   `[FinalScore "..."]`: The final score achieved.
*   `[HighestTile "..."]`: The value of the largest tile on the board.
*   `[Result "..."]`: The game's outcome, which should match the Termination Marker.

## 2. Movetext

The Movetext section follows the Tag Pairs and details the game's progression. Each turn is recorded as a set of three tokens:
`MoveNumber. PlayerMove NewTile`

```
1. D a2 2. R d2 3. D a1
```

*   **Move Number:** A positive integer followed by a period (`.`).
*   **Player Move:** A single uppercase character indicating the swipe direction:
    *   `U`: Up
    *   `D`: Down
    *   `L`: Left
    *   `R`: Right
*   **New Tile Generation:** Specifies the newly generated tile's value and location. The format is `<Value><Coordinate>`. If the tile's value is **2**, the `<Value>` prefix is omitted.
    *   `c4`: A **2** tile appears at coordinate `c4`.
    *   `4a1`: A **4** tile appears at coordinate `a1`.

### Coordinate System

The 4x4 board uses an algebraic notation where columns (files) are labeled `a-d` (left-to-right) and rows (ranks) are labeled `1-4` (bottom-to-top).

```
  +---+---+---+---+
4 | a4| b4| c4| d4|
  +---+---+---+---+
3 | a3| b3| c3| d3|
  +---+---+---+---+
2 | a2| b2| c2| d2|
  +---+---+---+---+
1 | a1| b1| c1| d1|
  +---+---+---+---+
```

### Annotations

The Movetext can be annotated for analysis or commentary.
*   **Comments:** Text enclosed in curly braces `{}` can be placed between tokens.
*   **Numeric Annotation Glyphs (NAGs):** Symbols like `!`, `?`, `!!`, or `??` can be appended directly to a Player Move to evaluate its quality (e.g., `4. R! b1`).

## 3. Termination Marker

The file concludes with a single marker that specifies the game's final state. It must be one of the following:

*   `Locked`: The game ended because the board was full with no available moves.
*   `Retired`: The player voluntarily ended the game while moves were still possible.
*   `*`: The game is unfinished, or its final result is unknown.

## Complete Example

```pgn
[Event "2048 High Score Attempt"]
[Site "PC, Web Browser"]
[Date "2023.10.28"]
[Player "GamerX"]
[InitialBoard "a3 c4"]
[FinalScore "42940"]
[HighestTile "4096"]
[Result "Locked"]

{ A good start with tiles far apart. Strategy: build in the d1 corner. }
1. D a2 2. R d2
3. D a1 { Consolidating the bottom row early. }
4. R! b1
5. L 4a4 { An unlucky 4 appears in a bad corner. }
6. U? a3 { This move is questionable as it breaks the bottom row structure. }

... { many moves later } ...

451. U c3
452. R d3 { The board is getting dangerously full. }
453. D a1 { The final move. No further moves are possible. } Locked
```